language: csharp
solution: SWEndor.sln
install:
  - sudo apt install xmlstarlet  
  - cd ./src
  - echo "Removing Pre-build events.."
  - find $TRAVIS_BUILD_DIR -type f -iname "*.csproj" -exec sh -c 'xmlstarlet ed --inplace -d "(/_:Project/_:PropertyGroup/_:PreBuildEvent)[1]/.." "{}"' \;
  - find $TRAVIS_BUILD_DIR -type f -iname "*.csproj" -exec sh -c 'xmlstarlet ed --inplace -d "(/_:Project/_:PropertyGroup/_:PostBuildEvent)[1]/.." "{}"' \;
  - nuget restore SWEndor.sln
  - nuget install xunit.runners -Version 1.9.2 -OutputDirectory testrunner
script:
  - msbuild /p:Configuration=Debug SWEndor.sln
  - mono ./testrunner/xunit.runners.1.9.2/tools/xunit.console.clr4.exe ./unittest/Primrose.UnitTests.dll
  - mono ./testrunner/xunit.runners.1.9.2/tools/xunit.console.clr4.exe ./unittest/Primrose.Expressions.UnitTests.dll
